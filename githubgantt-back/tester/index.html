<html>
<head>

<link rel="stylesheet" href="./bootstrap.min.css"  >

<script src="./jquery-3.5.1.slim.min.js" ></script>
<script src="./bootstrap.bundle.min.js"  ></script>

<link rel="stylesheet" type="text/css" href="./dhtmlxgantt.css">
<script src="./dhtmlxgantt.js"></script>

 <style>
.weekend { background: #dddddd;}
</style> 

<style>
.currentdate { background: #ffdddd;}
</style>


</head>
<body>
 
    

<small><b>
startDate: 25 mar. 2021
 ||  organization: Fundacio-Bit
 ||  repository: githubgantt
 ||  projectName: githubgantt-1.0.0
 ||  #programadors: 1
 &nbsp; &nbsp; &nbsp;
 <button onclick="javascript: gantt.config.min_column_width =  gantt.config.min_column_width +5;gantt.init('gantt_here');" >Ample Columna +</button>
  <button onclick="javascript: gantt.config.min_column_width =  gantt.config.min_column_width -5;gantt.init('gantt_here');" >Ample Columna -</button>

 
</b></small>


 <div id="gantt_here" style="width:100%; height:100%;"></div>
 

 
 <script type="text/javascript">
gantt.config.xml_date = "%Y-%m-%d %H:%i";


gantt.config.autosize = "xy";



gantt.config.min_column_width = 50;

gantt.plugins({         tooltip: true     }); 

gantt.config.columns=[
    {name:"text",       label:"Nom Tasca",  tree:true, width:'*' },    
    {name:"duration",   label:"Duració",   align: "center", hide: true },
    
];


//gantt.config.start_date = new Date(2019, 7, 1);
var holidays = [//USA, DC holidays
		new Date(2019, 0, 1),
		new Date(2019, 0, 21),
		new Date(2019, 3, 16),
		new Date(2019, 4, 12),
		new Date(2019, 4, 27),
		new Date(2019, 5, 16),
		new Date(2019, 6, 4),
		new Date(2019, 7, 2),
		new Date(2019, 7, 6),
		new Date(2019, 10 , 6),
		new Date(2020, 10, 5)
	];

	for (var i = 0; i < holidays.length; i++) {
		gantt.setWorkTime({
			date: holidays[i],
			hours: false
		});
	}

gantt.config.duration_unit = "hour";//an hour
gantt.config.duration_step = 1; // 1; 

// 0 refers to Sunday, 6 - to Saturday
gantt.templates.scale_cell_class = function(date){
    return columnColor(null, date);
};


gantt.templates.timeline_cell_class = function(task,date){
    return columnColor(task, date);
};


function columnColor(task, date) {
	if(date.getDay()==0||date.getDay()==6){
        return "weekend";
    }
	
	var day_month = date.getDate();
	var month = date.getMonth(); // Since getMonth() returns month from 0-11 not 1-12
	var year = date.getFullYear();

    
    if(day_month == 25 && month == 2 && year == 2021 ) {
        return "currentdate";
    }
}


gantt.config.open_tree_initially = true;

gantt.config.readonly = true;

gantt.init("gantt_here");
 
gantt.attachEvent("onTaskClick", function(id,e){
    //alert("Click on tasca " + id)
    //console.log(e);
    if (id == 1) {

    	 /// XYZ ZZZ Aquí fa falta Enllaç de Projecte
    	var win = window.open("https://github.com//Fundacio-Bit/githubgantt/projects/1");
    	 
    	 // XYZ ZZZ  Això es el codi per augmentar tamany de columna
    	gantt.config.min_column_width = gantt.config.min_column_width + 5;
    	
    	gantt.init("gantt_here");
    	 
    	 return true;
    }
    
    if (e.toElement.className == 'gantt_task_content') {
      var win = window.open("https://github.com//Fundacio-Bit/githubgantt/issues/" + id, '_blank');
    }
    return true;
});


gantt.parse({
  data: [
    {id:2147483647, text:" P R O J E C T   githubgantt-1.0.0", start_date:"2021-03-25 10:25", duration:null, progress:0.0, color: "#null"}
,{id:3, text:"Integrar Sistema de GitHub Manager #3", start_date:"2021-03-25 12:25", duration:24, parent:2147483647, progress:0.0, color: "#008000"}
,{id:2, text:"Implementar p&agrave;gines web de selecci&oacute; projectes #2", start_date:"2021-03-26 12:25", duration:24, parent:2147483647, progress:0.0, color: "#FFA500"}

  ] ,
  links:[
	{id:1, source: 2147483647, target:3, type:"1", color :"green"   }
,{id:2, source: 2147483647, target:2, type:"1", color :"green"   }

 ]
});

  </script>
  
 
</body>
</html>
